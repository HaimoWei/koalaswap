# ===============================
# backend/product-service/src/main/resources/application.yml
# 应用配置｜端口与数据源（通过环境变量注入）
# ===============================
server:
  port: 8081   # 与 user-service 区分端口

spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: none        # 使用现有 schema / Flyway，不让 JPA 自动改表
    show-sql: true
    properties:
      hibernate.jdbc.time_zone: UTC

app:
  product:
    max-images: 8
  # AWS S3 配置（直接配置）
  aws:
    region: ap-southeast-2
    bucket-name: koalaswap
    cdn-base-url: https://img.koalaswap.au
    presigned-url-expiration-minutes: 15
    upload:
      max-file-size: 10485760  # 10MB
      max-images-per-product: 8
      allowed-mime-types:
        - image/jpeg
        - image/png
        - image/webp
      allowed-extensions:
        - .jpg
        - .jpeg
        - .png
        - .webp
