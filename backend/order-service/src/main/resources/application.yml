# order-service ｜ 通用配置（可被环境变量覆盖）
server:
  port: 8082

spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: true
    properties:
      hibernate.jdbc.time_zone: UTC

app:
  # ===== JWT（⚠️ JwtService 需要该段，至少提供 secret） =====
  jwt:
    # 本地/测试可以用默认值，线上请改为强随机并用环境变量注入
    secret: ${APP_JWT_SECRET:dev-secret-change-me}
    issuer: ${APP_JWT_ISSUER:koalaswap}
    access-token-minutes: ${APP_JWT_ACCESS_MINUTES:60}

  # TokenFreshness / User-Service 回源
  user-service:
    internal-base-url: ${APP_USER_SERVICE_INTERNAL_BASE_URL:http://localhost:12649}

  # order-service 需要访问 product-service 获取商品信息
  product-service:
    internal-base-url: ${APP_PRODUCT_SERVICE_INTERNAL_BASE_URL:http://localhost:12648}

  token-freshness:
    cache-ttl-sec: ${APP_TOKEN_FRESHNESS_TTL_SEC:8}
    use-redis: ${APP_TOKEN_FRESHNESS_USE_REDIS:false}
    pubsub-channel: ${APP_TOKEN_FRESHNESS_CHANNEL:auth:pv:changed}
